# 一、软件需求说明书

## 1 引言

### 1.1 介绍

本项目名为“英语单词小工具”，它集单词查询、翻译和题目练习于一体，填补了pc端“查英语+练英语”软件的空缺。

本软件除了以上功能之外，还提供了诸如收藏笔记本、语音朗读、错题记录等功能，有着较人性化的设计。

本项目采用前后端分离的形式开发，前端采用Qt实现图形界面和交互；后端采用C++，搭配Python爬虫和MySQL数据库实现翻译和题库功能。

### 1.2 背景

现在市面上已经有很多为学生提供英语学习服务的软件，然而大多数软件都只适用于手机端，pc端只存在一些翻译软件，尚缺集查英语、学英语一体的软件。

### 1.3 设计概念图

```mermaid
graph LR

subgraph 前端
user(Qt用户界面)
end

subgraph 后端
sql(MySQL数据库)
server(c++服务器)
redis(Redis数据库)
api(翻译API)
end

user--http请求-->server
server--json返回-->user
sql--获取练习题-->server
api--缓存-->redis
redis--读取翻译结果-->server
```



## 2 任务概述

### 2.1 目标

本软件旨在提供英语学习，提供一个集英语查询、英语练习于一体，外加一些辅助功能的平台。

### 2.2 用户的特点

在校大学生，中小学生，有英语学习需求的人员。

## 3 运行环境规定

本软件支持Windows、Linux、macOS、Android、IOS、UWP等主流系统。

## 4 用户功能需求

1. 单词查询系统。本系统通过调用API获取用户输入内容的翻译结果，支持中英文互译，并通过调用系统内部的TTS语音引擎实现语音朗读功能。
2. 英语练习系统。本系统通过随机抽取MySQL中的题库，为用户生成一系列选择题。用户可自定义题目数量、难度，并在答题完成后生成统计信息，结果可保存为txt以便后期复习使用。
3. 笔记本系统。本系统可以记录下用户的重点词及其中文翻译，在翻译界面，用户可通过“收藏”按钮将单词记入笔记本中以便查看。笔记本以JSON的形式存于本地，用户随时可以通过软件提供的可视化界面方便的删除不想要的词汇。

## 5 界面操作需求

本软件有相对完善的人机关系设计，用户只需通过键鼠的交互就可以使用软件的完整功能。

# 二、可行性研究报告

## 1 编写目的

编写可行性研究报告的目的是进行该软件系统设计的可行性分析，从经济、技术、法律等方面分析所给出的解决方案是否可行，能否在规定的资源和时间的约束下完成。

## 2 技术可行性

1. 本软件基于Qt搭建，Qt拥有优秀的跨平台性能，一套代码通过一键部署，就可以支持绝大多数主流平台。因此本软件在跨平台服务上无技术问题。

2. 本软件的设计封装良好，充分考虑用户操作的各种可能性，排查了用户在输入和点击过程中可能出现的问题。因此本软件在日常使用过程中无技术问题。

3. 本软件后台服务器设计安全，// TODO

## 3 经济可行性

软件将以开源的形式发布，通过捐助的方式获取收益。基于LGPL协议，软件在开发过程中不存在成本问题，不需要为Qt官方付费。因此经济方面不存在问题。

## 4 社会因素方面的可行性

1. 本软件基于LGPL协议，以开源形式发布，不存在商业、专利、版权纠纷等问题。
2. 本软件不会收集用户的个人信息，不会侵犯用户的个人隐私，不收集非法信息，符合法律规定。

## 5 结论

本项目通过以上所有可行性分析，可以实行。

# 三、系统设计说明书

## 1 面向对象设计

### 1.1 系统设计

### 1.1.1 划分子系统

根据需求分析，我们将系统分为翻译系统、词典系统、练习题系统三大部分，三个系统通过菜单栏相关联，再结合后台数据库和爬虫，成为一个有机的整体。

#### 1.1.2 任务管理设计

本软件的任务有：获取翻译结果，保存用户单词，获取和统计练习题。三个任务分布在不同的系统中。

获取翻译结果涉及Http请求、JSON解析、Redis缓存和爬虫；保存用户单词在本地进行，涉及JSON的写入、读取和解析；获取和统计练习题涉及Http请求、JSON解析和MySQL数据库。

#### 1.1.3 数据管理设计

本系统中的题库数据采用MySQL数据库存储，题库可以随时进行增删改的操作；除此之外，翻译结果作为缓存，以键值对的形式存在Redis数据库中，以加快访问速度。

#### 1.1.4 资源管理设计

// TODO

#### 1.1.5 前后端通信设计

本系统涉及获得翻译结果和获得练习题两个通信需求，两个接口的设计如下：

1. 获得翻译结果，请求名：translate

   输入参数：query（查询内容，字符串型）

   输出参数：

   - 情况一，无音标信息：

     res（查询结果，字符串型）

   - 情况二，有音标信息，返回JSON：
   
   ```json
     {
     "res": ... , (查询结果，字符串型)
     "ph_en": ... , (英式音标，字符串型)
     "ph_am": ... (美式音标，字符串型)
     }
   ```
   
2. 获得练习题，请求名：getProblem

   输入参数：id（题号，整数型），difficulty（难度，字符串型）
   
   输出参数，返回JSON：
   
   ```json
   {
       "question": ... , (问题，字符串型)
       "answer": {	(可能的回答，JSON)
       	"A": ... , (选项A，字符串型)
       	"B": ... , (选项B，字符串型)
       	"C": ... (选项C，字符串型)
   	},
   	"solution": ... (答案，字符型)
   }
   ```
   
   

### 1.2 类设计

#### 1.2.1 主窗体类 `mainwindow.h`

组件：UI库（按钮、标签、滚动条等）、模态框控件库、TTS语音引擎库、JSON相关库（JSON解析、校验等）、文件操作库...

功能：绘制窗体UI和实现人机交互功能、语音播报、解析网络答复、读写用户本地词典。

#### 1.2.2 网络支持类 `networksupport.h`

组件：网络管理器库、网络请求库、网络答复库...

功能：发起Http请求并获取答复。

#### 1.2.3 正则表达式工具类 `regex.h`

组件：正则表达式库、正则检验库...

功能：判断中英文、校验用户输入。

#### // TODO...

## 2 面向对象建模

### 2.1 用况建模

#### 2.2.1 翻译系统

定义：该系统主要用于翻译，可实现中英文互译，单词、短语和短文的翻译功能，并提供音标和语音播报功能。

用况：

1. 基础交互：用户输入查询的内容，显示结果，点击查找、语音播报、收藏按钮
2. 翻译：Http请求与答复，爬取结果集，Redis缓存，解析JSON
3. 语音播报：调用TTS语音引擎，判断中英文

#### 2.2.2 词典系统

定义：该系统主要用于编辑用户词典，可实现加入词汇、随时删除不想要的词汇和本地同步。

用况：

1. 基础交互：显示词典，用户输入删除的内容，点击删除按钮，警告消息框
2. 同步词典内容：文件读写，解析JSON，编辑JSON

#### 2.2.3 练习题系统

定义：该系统主要用于用户进行练习，可实现自定义练习题难度和数量、做题、统计结果和保存。

用况：

1. 基础交互：设置难度和数量，显示题目信息，选择选项，显示结果统计信息，点击下一题和保存到本地按钮
2. 获取题目：Http请求与答复，访问MySQL数据库，解析JSON
3. 统计信息：正确率计算、判断中英文

### 2.2 静态建模

#### 2.2.1 翻译系统

```mermaid
graph LR

input[输入框]
-->search[查找按钮]
-->res[翻译输出框]
search-->sym[音标输出框]
input-->read[语音播报按钮]
res-->read
input-->favor
res-->favor[收藏按钮]
```

### 2.2.2 词典系统

```mermaid
graph LR

local[本地磁盘]
list[词典列表]
lackModal[词典缺失消息框]
input[输入框]
del[删除按钮]
delModal[删除提示消息框]

del-->list
del-->delModal
local-->list
local-->lackModal
input-->del
```



### 2.2.3 练习题系统

```mermaid
graph LR

subgraph 开始界面
radioBox[难度设定按钮集]
spin[数量设定框]
slider[数量滚动条]
start[开始按钮]
end

subgraph 过程界面
index[题号索引]
question[问题标签]
answer[选项标签]
next[下一题按钮]
end

subgraph 统计界面
res[概览标签]
list[统计列表]
save[保存到本地按钮]
back[返回按钮]
end

slider-->spin
spin-->slider
spin-->start
slider-->start
radioBox-->start
start-->next
index-->next
question-->next
answer-->next
next-->back
save-->back
list-->back
res-->back
back-->start
```



### 2.3 动态建模

#### 2.3.1 翻译系统

```mermaid
graph LR

main[翻译界面]
--输入-->input[/查找框/]
--Http请求-->redis{Redis数据库}
--存在缓存-->翻译结果
redis--不存在缓存-->python[爬虫]
--爬取-->api{第三方API}
api--输入中文或长文本-->res(翻译结果)
api--输入英文单词或短语-->json(JSON翻译结果集)

subgraph 服务器
redis
python
end
```



#### 2.3.2 词典系统

```mermaid
graph LR

input[/其他界面/]
--收藏重点词-->dic(我的词典)
edit[/词典界面/]--删除-->dic
dic--实时保存-->json[本地JSON]
json--实时读取-->dic
```

#### 2.3.3 练习题系统

```mermaid
graph LR

start[练习开始界面]
--设置-->diff[/难度单选按钮/]-->prac
start--设置-->num[/题目数量滑动条/]
-->prac[练习过程]
--练习结束-->res[统计结果]
--保存到-->local[本地]
prac--Http请求-->sql
sql--JSON数据集-->prac
subgraph 服务器
sql(MySQL数据库)
end
```



# 四、界面设计说明书

## 1 人机界面设计模型

```mermaid
graph LR
subgraph 主界面
trans(翻译界面)
dict(词典界面)
prac(练习界面)
	subgraph 翻译功能
	input(输入框)
	output(输出框)
	favor(收藏)
	end
	
	subgraph 练习功能
	prac-->init(题目初始化)
	init-->pro(做题过程)
	pro-->result(题目统计)
	end
end

trans-->input
input-->output
output-->favor
favor-->dict
```



## 2 基于用户群体的因素

本软件旨在服务大学生、中小学生和有英语学习需求的人员，因此界面设计须简单清晰。

## 3 任务分析

本项目属于教辅类软件项目，软件的功能应围绕用户的学习展开，旨在让学习更高效、更简便、更轻松。因此，本软件不仅需要实现翻译和练习题的功能，还需要设计提高学习效率和便于人机交互的各种细节和辅助功能。

## 4 用户界面风格

本产品的界面在原生UI基础上，自行编写样式表、绘制UI图标，设计风格简洁、功能清晰、排版合理，具有良好的人机关系。采用图标和文字相结合的方式，用最少的文字量为用户提供最多的信息，界面不仅美观，而且便于理解和上手。

## 5 遵守黄金三原则

### 5.1 让用户拥有控制权

1. 用户在任何界面都可以自由切换，灵活控制。
2. 软件提供各种自由可编辑控件与自定义选项，方便用户操作。

### 5.2 减少用户的记忆负担

1. 软件设计各种友好提示，如文本框内的输入提示。
2. 软件提供将用户内容保存到本地磁盘的渠道，下次用户使用时会自动读取。如词典界面实现了完整的JSON读写和解析功能，用户的单词列表以JSON格式存入本地，每次软件打开时会自动读取写入列表中。

### 5.3 保持界面一致

所有界面采用相同的红白配色风格，设计样式、字体等内容保持一致。界面分层合理，由三个界面组成一级页面，这些界面的子界面组成二级界面。

## 6 具体界面

### 6.1 主界面

主界面为翻译界面，用户可输入想要查询的内容到输入框中，点击查询，即可获取翻译结果。支持中英文互译和语音播报。用户可以点击收藏（星星按钮），将重点词存入词典中。

<img src="文档配图/img_01.png" style="zoom:50%;" />

### 6.2 副界面

副界面分为词典界面和单词练习界面，词典界面中会存放用户收藏的内容，用户随时可以删除不想要的内容。

<img src="文档配图/img_02.png" style="zoom:50%;" />

用户可以在单词练习开始界面自定义题目的难度和数量，不同难度会匹配不同的题库。

<img src="文档配图/img_03.png" style="zoom:50%;" />

### 6.3 练习界面的子页面

下图为用户做题过程中的界面。

<img src="文档配图/img_04.png" style="zoom:50%;" />

下图为用户做完所有题之后的界面，界面将统计用户本次练习的概览信息和每道题目的英文单词、中文翻译和正误。用户可以通过“生成统计结果”按钮，将统计信息以文本形式保存到本地。

<img src="文档配图/img_05.png" style="zoom:50%;" />

## 7 总结

本软件的界面设计符合人机关系，分页合理、内容简洁、功能明显、交互性好、美观实用，达到了预期要求。

# 五、数据库设计说明书

## 1. 引言

### 1.1 编写目的

### 1.2 背景

### 1.3 定义

### 1.4 参考资料

## 2 外部设计

## 3 结构设计

### 3.1 概念结构设计

### 3.2 逻辑结构设计

### 3.2.1 数据库表

## 3.3 物理结构设计

## 4 运用设计

# 六、测试计划

# 七、软件项目管理

# 八、操作手册

# 九、用户手册

# 十、致谢

